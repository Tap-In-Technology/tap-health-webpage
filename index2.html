<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tap Health - Index 2 v6</title>
    
    <!-- Mobile redirect script -->
    <script>
        // Redirect to mobile version when screen becomes small
        function isMobile() {
            return window.innerWidth <= 768 || /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        }
        
        // Redirect on window resize to mobile
        window.addEventListener('resize', function() {
            if (isMobile()) {
                window.location.href = 'index.html';
            }
        });
    </script>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <script src="https://cdn.tailwindcss.com?v=4"></script>
    <link rel="icon" href="favicon.ico" />
    <!-- Playfair Display font from Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        html {
            scroll-behavior: smooth;
        }
        
        /* Background image styling */
        .lightning-bg {
            background-image: url('/media/lightning_bg.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
            min-height: 120vh; /* Extra height to prevent white flash */
            position: relative;
        }
        
        /* Vignette overlay */
        .lightning-bg::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(ellipse at center, 
                rgba(0, 0, 0, 0.2) 0%, 
                rgba(0, 0, 0, 0.4) 40%, 
                rgba(0, 0, 0, 0.7) 70%, 
                rgba(0, 0, 0, 0.9) 100%);
            pointer-events: none;
            z-index: 1;
        }
        
        body {
            background-color: #000000;
            overflow-x: hidden;
        }
        
        /* Tiny black section */
        .black-section {
            background-color: #000000;
            min-height: 10vh; /* Half the size - very small section */
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 10;
        }
        
        
        /* Force phone aspect ratio */
        #phone {
            object-fit: contain;
            max-width: none;
            height: 80vh;
            width: auto;
        }
        
        /* REMOVED: Conflicting drop-shadow approach */
        
        /* REMOVED: Old conflicting glow overlay */
        
        /* REMOVED: Old conflicting fade overlay */
        
        /* ========================================
           ⚠️  CRITICAL: GLOW AGAINST BACKGROUND  ⚠️
           ========================================
           DO NOT MODIFY - This creates the white glow effect
           on the contact form phone against the lightning background.
           This was restored from commit 18a63fc and is working perfectly.
           Any changes to this will break the glow effect!
           ======================================== */
        #phone.contact-form-glow {
            filter: drop-shadow(0 0 20px rgba(255, 255, 255, 0.3)) 
                    drop-shadow(0 0 40px rgba(255, 255, 255, 0.2))
                    drop-shadow(0 0 60px rgba(255, 255, 255, 0.1));
        }
        
        /* Gleam Animation - covers whole contact phone */
        .contact-form-glow-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%; /* Cover whole phone */
            background: radial-gradient(ellipse at center, 
                rgba(255, 255, 255, 0.3) 0%, 
                rgba(255, 255, 255, 0.2) 30%, 
                rgba(255, 255, 255, 0.1) 60%, 
                transparent 100%);
            pointer-events: none;
            z-index: 24;
            mask: url('/media/contactFormPhone.png');
            -webkit-mask: url('/media/contactFormPhone.png');
            mask-size: contain;
            -webkit-mask-size: contain;
            mask-repeat: no-repeat;
            -webkit-mask-repeat: no-repeat;
            mask-position: center;
            -webkit-mask-position: center;
        }
        
        /* Direct fade overlay for contact form phone */
        .contact-form-fade-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, 
                transparent 0%, 
                transparent 65%, 
                rgba(0, 0, 0, 0.5) 75%, 
                rgba(0, 0, 0, 0.7) 85%, 
                rgba(0, 0, 0, 0.9) 100%);
            pointer-events: none;
            z-index: 25;
            mask: url('/media/contactFormPhone.png');
            -webkit-mask: url('/media/contactFormPhone.png');
            mask-size: contain;
            -webkit-mask-size: contain;
            mask-repeat: no-repeat;
            -webkit-mask-repeat: no-repeat;
            mask-position: center;
            -webkit-mask-position: center;
        }
        
        /* ========================================
           ⚠️  CRITICAL: OVERALL WEBSITE GRADIENT  ⚠️
           ========================================
           DO NOT MODIFY - This creates the black-to-transparent
           gradient overlay from bottom to 50% up the screen.
           Applied over everything except footer (privacy policy section).
           Any changes to this will break the overall gradient effect!
           ======================================== */
        #website-gradient-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, 
                transparent 0%, 
                transparent 50%, 
                rgba(0, 0, 0, 0.3) 70%, 
                rgba(0, 0, 0, 0.7) 85%, 
                rgba(0, 0, 0, 1) 100%);
            pointer-events: none;
            z-index: 35; /* Above most content but below footer */
        }
        
        /* Interactive contact form overlay on phone */
        #contact-form-interactive-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: auto;
            z-index: 26; /* Above phone image and other overlays */
            display: none;
        }
        
        /* Form field positioning on phone */
        .phone-form-field {
            position: absolute;
            background: transparent;
            border: none;
            border-radius: 0;
            padding: 4px 8px;
            font-size: 12px;
            color: #000;
            width: 120px;
            box-shadow: none;
        }
        
        .phone-form-field:focus {
            outline: none;
            border: none;
            box-shadow: none;
        }
        
        /* Position form fields on phone - EXACT FIGMA MEASUREMENTS - SCALE WITH PHONE */
        /* Phone: 426px × 880px, Fields: 338px × 40px, Left offset: 49px */
        #phone-name {
            top: 18.2%;
            left: 11.5%;
            width: 79.3%;
            height: 40px;
        }
        
        #phone-phone {
            top: 28.4%;
            left: 11.5%;
            width: 79.3%;
            height: 40px;
        }
        
        #phone-email {
            top: 38.6%;
            left: 11.5%;
            width: 79.3%;
            height: 40px;
        }
        
        #phone-message {
            top: 48.9%;
            left: 11.5%;
            width: 79.3%;
            height: 80px;
            resize: none;
        }
        
        /* Mid-form buttons (Approve/Cancel) - EXACT FIGMA MEASUREMENTS */
        #phone-approve {
            top: 59.1%;
            left: 11.5%;
            width: 79.3%;
            height: 40px;
            background: transparent;
            color: transparent;
        }
        
        #phone-cancel-mid {
            top: 65.9%;
            left: 11.5%;
            width: 79.3%;
            height: 40px;
            background: transparent;
            color: transparent;
        }
        
        /* Bottom buttons (Cancel/Send) - ESTIMATED POSITIONING */
        #phone-cancel {
            bottom: 18%;
            left: 25%;
            width: 40%;
            height: 40px;
            background: transparent;
            color: #000;
        }
        
        #phone-send {
            bottom: 18%;
            right: 25%;
            width: 40%;
            height: 40px;
            background: transparent;
            color: #000;
        }
        
        /* Phone form buttons */
        .phone-form-button {
            position: absolute;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: all 0.2s ease;
        }
        
        .phone-form-button:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }
        
        /* Smooth parallax effect */
        .parallax-smooth {
            will-change: transform;
            backface-visibility: hidden;
            transform: translateZ(0);
        }
        
        /* Phone gradient overlay */
        .phone-gradient {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(ellipse at 85% 15%, 
                    transparent 0%, 
                    transparent 20%, 
                    rgba(0, 0, 0, 0.1) 35%, 
                    rgba(0, 0, 0, 0.4) 50%, 
                    rgba(0, 0, 0, 0.8) 70%, 
                    rgba(0, 0, 0, 0.95) 100%),
                linear-gradient(to bottom, 
                    transparent 50%, 
                    rgba(0, 0, 0, 0.3) 70%, 
                    rgba(0, 0, 0, 0.7) 85%, 
                    rgba(0, 0, 0, 1) 100%);
            pointer-events: none;
            mask: url('/media/phone.png');
            mask-size: contain;
            mask-repeat: no-repeat;
            mask-position: center;
            -webkit-mask: url('/media/phone.png');
            -webkit-mask-size: contain;
            -webkit-mask-repeat: no-repeat;
            -webkit-mask-position: center;
        }
        
        /* Phone gleam effect */
        .phone-gleam {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
            mask: url('/media/phone.png');
            mask-size: contain;
            mask-repeat: no-repeat;
            mask-position: center;
            -webkit-mask: url('/media/phone.png');
            -webkit-mask-size: contain;
            -webkit-mask-repeat: no-repeat;
            -webkit-mask-position: center;
        }
        
        .phone-gleam::before {
            content: '';
            position: absolute;
            top: -100%;
            left: -100%;
            width: 200%;
            height: 200%;
            background: linear-gradient(135deg, transparent, rgba(255, 255, 255, 0.08), transparent);
            animation: gleam 4s ease-in-out infinite;
        }
        
        @keyframes gleam {
            0% {
                transform: translate(-100%, -100%);
            }
            75% {
                transform: translate(100%, 100%);
            }
            100% {
                transform: translate(100%, 100%);
            }
        }
        
        /* Completely disable gleam for contact form phone */
        .phone-container.contact-form-mode .phone-gleam {
            display: none !important;
        }
        
        .phone-container.contact-form-mode .phone-gleam::before {
            display: none !important;
            animation: none !important;
        }
        
        /* Typing animation */
        .typing-container {
            display: flex;
            align-items: center;
            gap: 1rem;
            position: relative;
            z-index: 50;
        }
        
        .typing-text {
            font-family: 'Courier New', monospace;
            font-size: 1rem;
            color: #ffffff;
            min-height: 1.25rem;
            white-space: nowrap;
        }
        
        /* Apply Inter font to all text elements */
        body {
            font-family: 'Playfair Display', serif;
        }
        
        .typing-cursor {
            display: inline-block;
            width: 2px;
            height: 1rem;
            background-color: #ffffff;
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
        
        .request-button {
            background: white;
            color: black;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            font-weight: 700;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }
        
        .request-button:hover {
            background: #e5e7eb;
        }
        
    </style>
</head>

<body class="min-h-screen">
    <!-- Lightning background hero section -->
    <section class="lightning-bg relative" style="min-height: 200vh;">
            <!-- Tap logo in top left -->
    <div class="fixed -top-2 left-6 z-20">
        <img src="/media/Tap_inverted.png" alt="Tap Health Logo" class="h-36 w-auto">
    </div>
    
    <!-- Hamburger menu in top right -->
    <div class="fixed top-6 right-6 z-30">
        <button id="menu-toggle" class="text-white hover:text-gray-300 transition-colors" onclick="toggleMenu()">
            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
        </button>
    </div>
    
        <!-- Hidden menu popup -->
        <div id="menu-overlay" class="fixed top-16 right-6 bg-black bg-opacity-0 backdrop-blur-sm rounded-lg shadow-2xl z-40 hidden min-w-48">
            <nav class="px-6 py-4 text-white">
                <a href="what-we-do.html" class="block py-3 text-lg font-bold hover:text-gray-300 transition-colors border-b border-gray-600">What We Do</a>
                            <a href="security-compliance.html" class="block py-3 text-lg font-bold hover:text-gray-300 transition-colors border-b border-gray-600">Security & Compliance</a>
                <a href="#" class="block py-3 text-lg font-bold hover:text-gray-300 transition-colors">Join Our Pilot Program</a>
            </nav>
        </div>
        
        <!-- Phone image large and centered, fading into background -->
        <div id="phone-container" style="position: absolute; top: 80%; left: 50%; transform: translate(-50%, -50%); opacity: 0; transition: none; z-index: 20;">
            <img src="/media/phone.png?v=2" alt="Phone" class="h-[80vh] w-auto" id="phone">
            <div class="phone-gradient"></div>
            <div class="phone-gleam"></div>
            <!-- Separate glow overlay for contact form -->
            <div id="contact-form-glow" class="contact-form-glow-overlay" style="display: none;"></div>
            <!-- Direct fade overlay for contact form -->
            <div id="contact-form-fade" class="contact-form-fade-overlay" style="display: none;"></div>
            <!-- Interactive contact form overlay -->
            <div id="contact-form-interactive-overlay">
                <input type="text" id="phone-name" class="phone-form-field" required>
                <input type="tel" id="phone-phone" class="phone-form-field">
                <input type="email" id="phone-email" class="phone-form-field" required>
                <textarea id="phone-message" class="phone-form-field" required></textarea>
                <button type="button" id="phone-approve" class="phone-form-button" onclick="approveForm()">Approve</button>
                <button type="button" id="phone-cancel-mid" class="phone-form-button" onclick="goBackToDefault()">Cancel</button>
                <button type="button" id="phone-cancel" class="phone-form-button" onclick="goBackToDefault()">Cancel</button>
                <button type="button" id="phone-send" class="phone-form-button" onclick="submitPhoneForm()">Send</button>
            </div>
        </div>
        
        <!-- Main heading text with opacity shifts -->
        <div class="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-30" id="text-container">
            <h1 class="text-white font-bold text-center leading-tight text-fade" id="text-1" style="text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.8), 0 0 20px rgba(0, 0, 0, 0.5); font-size: clamp(1.5rem, 6vw, 6rem); opacity: 1; transition: opacity 1s ease-in-out;">
                Your data.<br>Where you want it.
            </h1>
            <h1 class="text-white font-bold text-center leading-tight text-fade" id="text-2" style="text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.8), 0 0 20px rgba(0, 0, 0, 0.5); font-size: clamp(1.5rem, 6vw, 6rem); opacity: 0; transition: opacity 1s ease-in-out; position: absolute; top: 0; left: 0; width: 100%;">
                One Tap is all it takes.
            </h1>
        </div>
    </section>
    
    <!-- ========================================
         ⚠️  CRITICAL: OVERALL WEBSITE GRADIENT  ⚠️
         ========================================
         DO NOT MODIFY - This creates the black-to-transparent
         gradient overlay from bottom to 50% up the screen.
         Applied over everything except footer (privacy policy section).
         Any changes to this will break the overall gradient effect!
         ======================================== -->
    <div id="website-gradient-overlay"></div>
    
    <!-- Tiny black section with privacy policy and get in touch -->
    <section class="black-section" style="position: relative; z-index: 50;">
        <div class="w-full flex justify-between items-center px-6">
            <div class="flex items-center gap-4">
                <a href="privacy.html" class="text-xs text-gray-400 hover:text-white transition-colors" style="font-size: 10px;">Privacy Policy</a>
            </div>
            <div class="flex items-center gap-4">
                <div class="typing-container">
                    <div class="typing-text" id="typing-text"></div>
                </div>
                <button onclick="openContactForm()"
                    class="bg-white text-black px-4 py-2 rounded-lg text-sm font-bold hover:bg-gray-200 active:bg-gray-300 active:scale-95 transform transition-all duration-150 ease-in-out shadow-md hover:shadow-lg active:shadow-sm">
                    Get in Touch
                </button>
            </div>
        </div>
    </section>

    <!-- Success Confirmation Popup -->
    <div id="successPopup" class="fixed inset-0 bg-black bg-opacity-80 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-xl p-6 w-80 max-w-sm shadow-2xl text-center">
            <div class="mb-4">
                <svg class="w-16 h-16 text-green-500 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                </svg>
            </div>
            <h3 class="text-xl font-bold text-gray-900 mb-2">Message Sent!</h3>
            <p class="text-gray-600 mb-6">Thank you for reaching out. We'll get back to you soon!</p>
            <button onclick="closeSuccessPopup()" class="w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors">
                Got it
            </button>
        </div>
    </div>

    <!-- Contact Form Popup -->
    <div id="contactPopup" class="fixed inset-0 bg-black bg-opacity-80 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-xl p-4 w-80 max-w-sm shadow-2xl" style="max-width: 320px; width: 320px; padding: 16px;">
            <div class="flex justify-between items-center mb-3" style="margin-bottom: 12px;">
                <h3 class="text-lg font-bold text-gray-900" style="font-size: 18px; font-weight: bold;">Get in Touch</h3>
                <button onclick="closeContactForm()" class="text-gray-400 hover:text-gray-600 transition-colors">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="width: 16px; height: 16px;">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <form id="contactForm" class="space-y-2" style="gap: 8px;">
                <div>
                    <label for="name" class="block text-xs font-medium text-gray-700 mb-1" style="font-size: 12px; margin-bottom: 4px;">Name *</label>
                    <input type="text" id="name" name="name" required 
                           class="w-full px-2 py-1 border border-gray-300 rounded text-gray-900 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent" 
                           style="padding: 4px 8px; font-size: 12px; height: 28px;">
                </div>
                <div>
                    <label for="email" class="block text-xs font-medium text-gray-700 mb-1" style="font-size: 12px; margin-bottom: 4px;">Email *</label>
                    <input type="email" id="email" name="email" required 
                           class="w-full px-2 py-1 border border-gray-300 rounded text-gray-900 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent" 
                           style="padding: 4px 8px; font-size: 12px; height: 28px;">
                </div>
                <div>
                    <label for="phone" class="block text-xs font-medium text-gray-700 mb-1" style="font-size: 12px; margin-bottom: 4px;">Phone</label>
                    <input type="tel" id="phone" name="phone" 
                           class="w-full px-2 py-1 border border-gray-300 rounded text-gray-900 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent" 
                           style="padding: 4px 8px; font-size: 12px; height: 28px;">
                </div>
                <div>
                    <label for="message" class="block text-xs font-medium text-gray-700 mb-1" style="font-size: 12px; margin-bottom: 4px;">Message *</label>
                    <textarea id="message" name="message" rows="2" required 
                              class="w-full px-2 py-1 border border-gray-300 rounded text-gray-900 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-transparent resize-none" 
                              style="padding: 4px 8px; font-size: 12px; height: 48px;"></textarea>
                </div>
                <div class="flex gap-2 pt-2" style="gap: 8px; padding-top: 8px;">
                    <button type="button" onclick="closeContactForm()" 
                            class="flex-1 px-2 py-1 border border-gray-300 text-gray-700 rounded text-xs hover:bg-gray-50 transition-colors font-medium" 
                            style="padding: 4px 8px; font-size: 12px; height: 28px;">
                        Cancel
                    </button>
                    <button type="submit" 
                            class="flex-1 px-2 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700 transition-colors font-medium" 
                            style="padding: 4px 8px; font-size: 12px; height: 28px;">
                        Send
                    </button>
                </div>
            </form>
        </div>
    </div>


    <script>
        // Contact form functionality
        function enteringContactForm() {
            // Switch phone to show contact form
            switchPhoneImage('contactForm');
        }

        function exitingContactForm() {
            // Switch phone back to default - this will handle button reset
            switchPhoneImage('default');
            
            // Clear all form fields when exiting
            const nameField = document.getElementById('phone-name');
            const emailField = document.getElementById('phone-email');
            const phoneField = document.getElementById('phone-phone');
            const messageField = document.getElementById('phone-message');
            
            if (nameField) nameField.value = '';
            if (emailField) emailField.value = '';
            if (phoneField) phoneField.value = '';
            if (messageField) messageField.value = '';
        }

        function openContactForm() {
            // COMMENTED OUT: Contact form popup - keeping phone transition only
            // document.getElementById('contactPopup').classList.remove('hidden');
            // document.body.style.overflow = 'hidden'; // Prevent background scrolling
            
            // Use the new simplified function
            enteringContactForm();
        }
        
        function goBackToDefault() {
            // Use the new simplified function
            exitingContactForm();
        }
        
        // Contact form phone limited scroll - allow tiny scroll up
        let isContactFormMode = false;
        let currentScrollY = 0;
        const maxScrollUp = 20; // Maximum pixels allowed to scroll up
        
        function limitContactFormScroll(e) {
            if (!isContactFormMode) return;
            
            // Get scroll direction and amount
            const deltaY = e.deltaY || e.detail || e.wheelDelta;
            const isScrollingUp = deltaY < 0;
            
            if (isScrollingUp) {
                // Check if we've already scrolled up the maximum amount
                if (currentScrollY >= maxScrollUp) {
                    e.preventDefault();
                    return;
                }
                
                // Allow tiny scroll up
                const scrollAmount = Math.min(Math.abs(deltaY), maxScrollUp - currentScrollY);
                currentScrollY += scrollAmount;
                
                // Apply the scroll
                window.scrollBy(0, -scrollAmount);
                e.preventDefault();
            } else {
                // Allow normal downward scrolling
                currentScrollY = Math.max(0, currentScrollY - Math.abs(deltaY));
            }
        }
        
        // Debug function to check glow visibility at different points
        window.debugGlowVisibility = function() {
            if (!isContactFormMode) return;
            
            const phoneImg = document.getElementById('phone');
            const glowOverlay = document.getElementById('contact-form-glow');
            
            if (phoneImg && glowOverlay) {
                const phoneRect = phoneImg.getBoundingClientRect();
                const glowRect = glowOverlay.getBoundingClientRect();
                
                // Calculate key points on the phone
                const phoneTop = phoneRect.top;
                const phoneBottom = phoneRect.bottom;
                const phoneHeight = phoneRect.height;
                
                const top20Percent = phoneTop + (phoneHeight * 0.20);
                const top25Percent = phoneTop + (phoneHeight * 0.25);
                const top50Percent = phoneTop + (phoneHeight * 0.50);
                const top65Percent = phoneTop + (phoneHeight * 0.65);
                const top70Percent = phoneTop + (phoneHeight * 0.70);
                const top75Percent = phoneTop + (phoneHeight * 0.75);
                const bottom25Percent = phoneTop + (phoneHeight * 0.75);
                
                console.log('=== GLOW VISIBILITY DEBUG ===');
                console.log('Phone height:', phoneHeight);
                console.log('Glow overlay height:', glowRect.height);
                console.log('Gleam Animation covers whole phone (100%)');
                console.log('Key points on phone:');
                console.log('- Top 25%:', top25Percent, 'px from top');
                console.log('- Top 50%:', top50Percent, 'px from top');
                console.log('- Top 65%:', top65Percent, 'px from top (glow against background cutoff)');
                console.log('- Top 70%:', top70Percent, 'px from top');
                console.log('- Top 75%:', top75Percent, 'px from top');
                console.log('Gleam Animation ends at:', glowRect.bottom, 'px from top');
                console.log('Glow against background should end at:', top65Percent, 'px from top');
                console.log('Gleam covers whole phone, glow fades at 65%');
            }
        }

        function closeContactForm() {
            // COMMENTED OUT: Contact form popup - keeping phone transition only
            // document.getElementById('contactPopup').classList.add('hidden');
            // document.body.style.overflow = 'auto'; // Restore scrolling
            // document.getElementById('contactForm').reset(); // Clear form
            
            // Use the new simplified function
            exitingContactForm();
        }

        function closeSuccessPopup() {
            document.getElementById('successPopup').classList.add('hidden');
            document.body.style.overflow = 'auto'; // Restore scrolling
            
            // Use the new simplified function
            exitingContactForm();
        }

        // Handle form submission from popup (commented out)
        document.getElementById('contactForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const phone = document.getElementById('phone').value;
            const message = document.getElementById('message').value;

            if (!name || !email || !message) {
                alert('Please fill in all required fields.');
                return;
            }

            // Show success popup instead of alert
            closeContactForm(); // Close the form first
            document.getElementById('successPopup').classList.remove('hidden');
            document.body.style.overflow = 'hidden'; // Prevent background scrolling
        });
        
        // Handle form approval from phone overlay
        function approveForm() {
            const name = document.getElementById('phone-name').value;
            const email = document.getElementById('phone-email').value;
            const phone = document.getElementById('phone-phone').value;
            const message = document.getElementById('phone-message').value;

            if (!name || !email || !message) {
                alert('Please fill in all required fields.');
                return;
            }

            // Show success popup
            exitingContactForm(); // Switch back to default phone
            document.getElementById('successPopup').classList.remove('hidden');
            document.body.style.overflow = 'hidden'; // Prevent background scrolling
        }
        
        // Handle form submission from phone overlay
        function submitPhoneForm() {
            const name = document.getElementById('phone-name').value;
            const email = document.getElementById('phone-email').value;
            const phone = document.getElementById('phone-phone').value;
            const message = document.getElementById('phone-message').value;

            if (!name || !email || !message) {
                alert('Please fill in all required fields.');
                return;
            }

            // Show success popup
            exitingContactForm(); // Switch back to default phone
            document.getElementById('successPopup').classList.remove('hidden');
            document.body.style.overflow = 'hidden'; // Prevent background scrolling
        }

        // Close popup when clicking outside
        document.getElementById('contactPopup').addEventListener('click', function(e) {
            if (e.target === this) {
                closeContactForm();
            }
        });

        // Close success popup when clicking outside
        document.getElementById('successPopup').addEventListener('click', function(e) {
            if (e.target === this) {
                closeSuccessPopup();
            }
        });


        // Smooth parallax scrolling effect
        
        function updateParallax() {
            const scrolled = window.pageYOffset;
            const parallaxRate = 0.3; // Gentler movement
            
                    // Apply parallax to phone container only (text is now fixed)
        const phoneContainer = document.getElementById('phone-container');
        
        if (phoneContainer) {
            const translateY = scrolled * parallaxRate;
            phoneContainer.style.transform = `translate(-50%, calc(-50% + ${translateY}px))`;
        }
            
            ticking = false;
        }
        
        function requestParallaxUpdate() {
            if (!ticking) {
                requestAnimationFrame(updateParallax);
                ticking = true;
            }
        }
        
        window.addEventListener('scroll', requestParallaxUpdate, { passive: true });

        // Typing animation
        const sentences = [
            "Hate filling out forms? We do too!",
            "It's time for filling out forms to get an upgrade",
            "Who has the most annoying forms? We want to hear! ----->"
        ];
        
        let currentSentenceIndex = 0;
        let currentCharIndex = 0;
        let isDeleting = false;
        let isSpecialEffect = false;
        const typingElement = document.getElementById('typing-text');
        
        // Initialize with empty text
        typingElement.textContent = '';
        
        function typeText() {
            const currentSentence = sentences[currentSentenceIndex];
            
            if (isDeleting) {
                // Delete characters
                typingElement.textContent = currentSentence.substring(0, currentCharIndex - 1);
                currentCharIndex--;
                
                if (currentCharIndex === 0) {
                    isDeleting = false;
                    currentSentenceIndex = (currentSentenceIndex + 1) % sentences.length;
                }
            } else {
                // Type characters
                typingElement.textContent = currentSentence.substring(0, currentCharIndex + 1);
                currentCharIndex++;
                
                if (currentCharIndex === currentSentence.length) {
                    // Special effect for second sentence (index 1)
                    if (currentSentenceIndex === 1) {
                        // Add period
                        typingElement.textContent = currentSentence + ".";
                        setTimeout(() => {
                            // Delete period
                            typingElement.textContent = currentSentence;
                            setTimeout(() => {
                                // Add first exclamation point
                                typingElement.textContent = currentSentence + "!";
                                setTimeout(() => {
                                    // Add second exclamation point
                                    typingElement.textContent = currentSentence + "!!";
                                    setTimeout(() => {
                                        // Add third exclamation point
                                        typingElement.textContent = currentSentence + "!!!";
                                        setTimeout(() => {
                                            // Start deleting everything
                                            isDeleting = true;
                                            typeText(); // Continue the animation
                                        }, 1000);
                                    }, 200);
                                }, 200);
                            }, 200);
                        }, 1500);
                        return;
                    } else {
                        // Normal pause before deleting
                        setTimeout(() => {
                            isDeleting = true;
                            typeText(); // Continue the animation
                        }, 2000);
                        return;
                    }
                }
            }
            
            // Set typing speed
            const typingSpeed = isDeleting ? 50 : 100;
            setTimeout(typeText, typingSpeed);
        }
        
        // Start typing animation when user scrolls to the bottom section
        let typingStarted = false;
        
        function checkScrollPosition() {
            const blackSection = document.querySelector('.black-section');
            const sectionTop = blackSection.offsetTop;
            const sectionHeight = blackSection.offsetHeight;
            const scrollPosition = window.pageYOffset + window.innerHeight;
            
            // Start typing when the bottom section is visible
            if (scrollPosition >= sectionTop && !typingStarted) {
                typingStarted = true;
                // Reset to first sentence and start typing
                currentSentenceIndex = 0;
                currentCharIndex = 0;
                isDeleting = false;
                typeText();
            }
        }
        
        window.addEventListener('scroll', checkScrollPosition);
        window.addEventListener('load', checkScrollPosition);

        // Opacity shift text transitions
        let currentTextIndex = 0;
        const textElements = [
            { element: document.getElementById('text-1'), showAt: 0 },
            { element: document.getElementById('text-2'), showAt: 200 }
        ];

        function updateTextOpacity() {
            const scrolled = window.pageYOffset;
            
            // Use hysteresis to prevent rapid switching
            // Different thresholds for up vs down to create a "dead zone"
            const downThreshold = 280;  // Scroll down past this to show Text 2
            const upThreshold = 260;    // Scroll up past this to show Text 1
            
            // Determine which text should be visible based on scroll position and current state
            let activeTextIndex;
            if (currentTextIndex === 0) {
                // Currently showing Text 1, only switch to Text 2 if scrolling down past downThreshold
                activeTextIndex = scrolled >= downThreshold ? 1 : 0;
            } else {
                // Currently showing Text 2, only switch to Text 1 if scrolling up past upThreshold
                activeTextIndex = scrolled <= upThreshold ? 0 : 1;
            }
            
            // Update header text based on scroll position
            if (activeTextIndex !== currentTextIndex) {
                currentTextIndex = activeTextIndex;
            }
            
            // Show the active text, hide all others
            textElements.forEach((textObj, index) => {
                if (index === activeTextIndex) {
                    textObj.element.style.opacity = '1';
                } else {
                    textObj.element.style.opacity = '0';
                }
            });
        }

        window.addEventListener('scroll', updateTextOpacity);
        window.addEventListener('load', updateTextOpacity);

        // ========================================
        // PHONE SCROLL ANIMATION - DO NOT MODIFY
        // ========================================
        // This section handles the phone fade-in and position animation on scroll.
        // It's working perfectly and should not be changed unless absolutely necessary.
        // The phone starts invisible at 80% and smoothly animates to 67.5% as user scrolls.
        
        let ticking = false;
        let lastScrollY = 0;
        
        function updatePhoneOpacity() {
            const scrolled = document.documentElement.scrollTop || window.pageYOffset;
            const phoneContainer = document.getElementById('phone-container');
            
            
            if (phoneContainer) {
                        // Continuous phone animation based on scroll percentage
                        const maxScroll = document.documentElement.scrollHeight - window.innerHeight;
                        const scrollProgress = Math.min(scrolled / maxScroll, 1); // 0 to 1
                        
                        // Smooth easing function - DO NOT CHANGE
                        function easeInOutCubic(t) {
                            return t < 0.5 ? 4 * t * t * t : 1 - Math.pow(-2 * t + 2, 3) / 2;
                        }
                        
                        const easedProgress = easeInOutCubic(scrollProgress);
                        
                        // Opacity: 0 at top, 1 at bottom - WORKING PERFECTLY
                        const opacity = easedProgress;
                        
                        // Position: 80% at top (just off-screen), lightning-aligned position at bottom
                        // These values are fine-tuned and working - DO NOT CHANGE
                        const startTop = 80;  // 80% (just off-screen, visible immediately)
                        const endTop = 67.5;  // 67.5% final position - PERFECTLY ALIGNED
                        const currentTop = startTop + (endTop - startTop) * easedProgress;
                        
                        
                        // Apply the animation - DO NOT MODIFY
                        phoneContainer.style.opacity = opacity.toString();
                        phoneContainer.style.top = currentTop + '%';
                        phoneContainer.style.left = '50%';
                        phoneContainer.style.transform = 'translate(-50%, -50%)';
                        
                lastScrollY = scrolled;
            }
        }

        
        window.addEventListener('scroll', updatePhoneOpacity);
        window.addEventListener('load', updatePhoneOpacity);
        
        // Phone image transition functionality
        // CONFIGURATION: Easy to update when phone mockup changes
        const PHONE_IMAGES = {
            default: '/media/phone.png?v=2',           // Original phone with lightning background
            contactForm: '/media/contactFormPhone.png?v=2'  // Phone showing Tap app form
        };
        
        function switchPhoneImage(imageType) {
            const phoneImg = document.getElementById('phone');
            const textContainer = document.getElementById('text-container');
            const phoneContainer = document.getElementById('phone-container');
            
            if (phoneImg && PHONE_IMAGES[imageType]) {
                phoneImg.src = PHONE_IMAGES[imageType];
                
                // Hide/show header text based on phone image
                if (imageType === 'contactForm') {
                    // Hide the white header text when showing contact form
                    if (textContainer) {
                        textContainer.style.display = 'none';
                    }
                    
                    // Hide the typing animation when showing contact form
                    const typingContainer = document.querySelector('.typing-container');
                    if (typingContainer) {
                        typingContainer.style.display = 'none';
                    }
                    
                    // Change Get in Touch button to Go Back button
                    // Find the main button (not the phone form buttons) by excluding phone-form-button class
                    const getInTouchBtn = document.querySelector('button[onclick="openContactForm()"]:not(.phone-form-button)');
                    if (getInTouchBtn) {
                        getInTouchBtn.textContent = 'Go Back';
                        getInTouchBtn.setAttribute('onclick', 'goBackToDefault()');
                    }
                    
                    /* ========================================
                       ⚠️  CRITICAL: GLOW AGAINST BACKGROUND  ⚠️
                       ========================================
                       DO NOT MODIFY - This applies the contact-form-glow
                       class to create the white glow effect on the phone
                       against the lightning background. This was restored
                       from commit 18a63fc and is working perfectly!
                       ======================================== */
                    // Apply glow after the new phone image is loaded
                    phoneImg.onload = function() {
                        phoneImg.classList.add('contact-form-glow');
                    };
                    
                    // If image is already loaded (cached), apply glow immediately
                    if (phoneImg.complete) {
                        phoneImg.classList.add('contact-form-glow');
                    }
                    
                    // Add contact form mode class for aggressive fade effect
                    phoneContainer.classList.add('contact-form-mode');
                    
                    // Hide gleam element using CSS (more reliable than DOM removal)
                    const gleamElement = phoneContainer.querySelector('.phone-gleam');
                    if (gleamElement) {
                        gleamElement.style.display = 'none';
                    }
                    
                    // Show the direct fade overlay
                    const fadeOverlay = document.getElementById('contact-form-fade');
                    if (fadeOverlay) {
                        fadeOverlay.style.display = 'block';
                    }
                    
                    // Show the interactive form overlay
                    const interactiveOverlay = document.getElementById('contact-form-interactive-overlay');
                    if (interactiveOverlay) {
                        interactiveOverlay.style.display = 'block';
                    }
                    
                    // Enable contact form limited scroll
                    isContactFormMode = true;
                    currentScrollY = 0; // Reset scroll counter
                    window.addEventListener('wheel', limitContactFormScroll, { passive: false });
                    
                    // Change gradient to dark bottom for contact form
                    if (phoneContainer) {
                        const gradientDiv = phoneContainer.querySelector('.phone-gradient');
                        if (gradientDiv) {
                            gradientDiv.style.background = `
                                linear-gradient(to bottom, 
                                    transparent 0%, 
                                    transparent 60%, 
                                    rgba(0, 0, 0, 0.3) 80%, 
                                    rgba(0, 0, 0, 0.8) 100%)
                            `;
                        }
                    }
                } else {
                    // Show the white header text for default phone
                    if (textContainer) {
                        textContainer.style.display = 'block';
                    }
                    
                    // Show the typing animation for default phone
                    const typingContainer = document.querySelector('.typing-container');
                    if (typingContainer) {
                        typingContainer.style.display = 'block';
                    }
                    
                    // Change Go Back button back to Get in Touch button
                    // Find the main button (not the phone form buttons) by excluding phone-form-button class
                    let goBackBtn = document.querySelector('button[onclick="goBackToDefault()"]:not(.phone-form-button)');
                    if (!goBackBtn) {
                        // Fallback: find button by text content and exclude phone form buttons
                        const buttons = document.querySelectorAll('button:not(.phone-form-button)');
                        for (let btn of buttons) {
                            if (btn.textContent.trim() === 'Go Back') {
                                goBackBtn = btn;
                                break;
                            }
                        }
                    }
                    if (goBackBtn) {
                        goBackBtn.textContent = 'Get in Touch';
                        goBackBtn.setAttribute('onclick', 'openContactForm()');
                        console.log('Button reset to "Get in Touch" from switchPhoneImage(default)');
                        console.log('Button text after reset:', goBackBtn.textContent);
                        console.log('Button onclick after reset:', goBackBtn.getAttribute('onclick'));
                    } else {
                        console.warn('Could not find Go Back button to reset in switchPhoneImage(default)');
                        // Debug: list all buttons
                        const allButtons = document.querySelectorAll('button');
                        console.log('All buttons found:', Array.from(allButtons).map(btn => ({
                            text: btn.textContent.trim(),
                            onclick: btn.getAttribute('onclick')
                        })));
                    }
                    
                    // Remove contact form mode class FIRST to ensure mask is removed
                    phoneContainer.classList.remove('contact-form-mode');
                    
                    // Clear the onload event handler to prevent re-applying glow
                    phoneImg.onload = null;
                    
                    /* ========================================
                       ⚠️  CRITICAL: REMOVE GLOW AGAINST BACKGROUND  ⚠️
                       ========================================
                       DO NOT MODIFY - This removes the contact-form-glow
                       class to stop the white glow effect when returning
                       to the default phone. This is essential for proper
                       state management!
                       ======================================== */
                    // Remove glowing effect from default phone
                    phoneImg.classList.remove('contact-form-glow');
                    
                    // Force remove any remaining mask properties
                    phoneImg.style.mask = '';
                    phoneImg.style.webkitMask = '';
                    
                    // Restore gleam element visibility
                    const gleamElement = phoneContainer.querySelector('.phone-gleam');
                    if (gleamElement) {
                        gleamElement.style.display = '';
                    }
                    
                    // Hide the direct fade overlay
                    const fadeOverlay = document.getElementById('contact-form-fade');
                    if (fadeOverlay) {
                        fadeOverlay.style.display = 'none';
                    }
                    
                    // Hide the interactive form overlay
                    const interactiveOverlay = document.getElementById('contact-form-interactive-overlay');
                    if (interactiveOverlay) {
                        interactiveOverlay.style.display = 'none';
                    }
                    
                    // Disable contact form limited scroll
                    isContactFormMode = false;
                    currentScrollY = 0; // Reset scroll counter
                    window.removeEventListener('wheel', limitContactFormScroll);
                    
                    // Restore original upper-right spotlight gradient
                    if (phoneContainer) {
                        const gradientDiv = phoneContainer.querySelector('.phone-gradient');
                        if (gradientDiv) {
                            gradientDiv.style.background = `
                                radial-gradient(ellipse at 85% 15%, 
                                    transparent 0%, 
                                    transparent 20%, 
                                    rgba(0, 0, 0, 0.1) 35%, 
                                    rgba(0, 0, 0, 0.4) 50%, 
                                    rgba(0, 0, 0, 0.8) 70%, 
                                    rgba(0, 0, 0, 0.95) 100%),
                                linear-gradient(to bottom, 
                                    transparent 50%, 
                                    rgba(0, 0, 0, 0.3) 70%, 
                                    rgba(0, 0, 0, 0.7) 85%, 
                                    rgba(0, 0, 0, 1) 100%)
                            `;
                        }
                    }
                }
            }
        }
        
        // Menu toggle functionality
        function toggleMenu() {
            const menuOverlay = document.getElementById('menu-overlay');
            const menuToggle = document.getElementById('menu-toggle');
            
            if (menuOverlay.classList.contains('hidden')) {
                menuOverlay.classList.remove('hidden');
                // No need to prevent background scrolling for popup menu
            } else {
                menuOverlay.classList.add('hidden');
            }
        }
        
        // Close menu when clicking outside
        document.getElementById('menu-overlay').addEventListener('click', function(e) {
            if (e.target === this) {
                toggleMenu();
            }
        });
    </script>
</body>

</html>
